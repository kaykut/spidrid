appId: com.spidrid.app
---
# PLAYBACK BASIC TEST: Verifies RSVP playback navigation and controls
#
# PREREQUISITE: Metro bundler must be running
# 1. Start Metro: npx expo start (in spidrid-e2e-maestro directory)
# 2. Ensure dev client is installed: npx expo run:ios --device "Spidrid-E2E-Test"
# 3. Run this test

- launchApp

# If dev client home screen shows, connect to Metro
- runFlow:
    when:
      visible: "http://localhost:8081"
    commands:
      - tapOn: "http://localhost:8081"

# Dismiss any developer menu/error dialogs
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Dismiss"
    optional: true
- tapOn:
    text: "Minimize"
    optional: true

# Close developer tools if opened
- tapOn:
    point: "95%,8%"
    optional: true

# Wait for content list screen to be ready
- extendedWaitUntil:
    visible:
      id: "content-list.fab-add"
    timeout: 30000

# Open add-content modal and select first practice topic
- tapOn:
    id: "content-list.fab-add"

# Wait for add-content modal to appear
- extendedWaitUntil:
    visible: "New Content"
    timeout: 5000

# Scroll down to ensure Practice card is fully visible
- scroll

# Tap the chevron icon on the right side of the Practice card to expand it
- tapOn:
    point: "85%,78%"

# Give expansion animation time to complete
- scroll
- scroll

# Wait for Practice section to expand and show topics
- extendedWaitUntil:
    visible:
      id: "add-content.practice.topic-0"
    timeout: 10000
- tapOn:
    id: "add-content.practice.topic-0"

# Verify playback screen loaded and word container visible
- extendedWaitUntil:
    visible:
      id: "playback.rsvp.word-container"
    timeout: 5000

# Start playback
- tapOn:
    id: "playback.controls.play-pause-btn"

# Wait for words to start displaying
- extendedWaitUntil:
    visible:
      id: "playback.rsvp.word-container"
    timeout: 5000

# Pause playback
- tapOn:
    id: "playback.controls.play-pause-btn"

# Skip to end using forward button repeatedly
- repeat:
    times: 30
    commands:
      - tapOn:
          id: "playback.controls.skip-forward-btn"

# Short wait for any transitions
- scroll

# Test completed successfully if we get here (navigation and controls worked)
- assertVisible:
    id: "playback.controls.play-pause-btn"
